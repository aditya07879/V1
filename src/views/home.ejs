<%- include('partials/head', { title: 'Home | SecureVote' }) %>
<%- include('partials/nav', { user }) %>

<!-- ================= HERO ================= -->
<section class="relative overflow-hidden bg-bg border-b border-white/10">
  <div class="h-[80vh] flex items-center justify-center bg-navy relative">
    <div class="absolute inset-0 bg-gradient-to-b from-black/50 to-black/90"></div>

    <div class="relative z-10 text-center px-6">
      <h1 class="text-white text-5xl md:text-6xl font-semibold mb-6">
        ğš…ğš˜ğšğš. ğš…ğšğš›ğš’ğšğš¢. ğšƒğš›ğšğšœğš.
      </h1>
      <p class="text-muted max-w-2xl mx-auto text-lg mb-8">
        ğ–  ğ—Œğ–¾ğ–¼ğ—ğ—‹ğ–¾ ğ–½ğ—‚ğ—€ğ—‚ğ—ğ–ºğ—… ğ—ğ—ˆğ—ğ—‚ğ—‡ğ—€ ğ—‚ğ—‡ğ–¿ğ—‹ğ–ºğ—Œğ—ğ—‹ğ—ğ–¼ğ—ğ—ğ—‹ğ–¾ ğ–»ğ—ğ—‚ğ—…ğ— ğ–¿ğ—ˆğ—‹ ğ—ğ—‹ğ–ºğ—‡ğ—Œğ—‰ğ–ºğ—‹ğ–¾ğ—‡ğ–¼ğ—’.
      </p>

      <a href="#elections"
         class="inline-block bg-accent text-white px-6 py-3 rounded-lg font-medium
                hover:brightness-125 transition shadow-lg shadow-accent/30">
        Explore Elections
      </a>
    </div>
  </div>
</section>

<!-- ================= STATS ================= -->
<section class="bg-bg py-20">
  <div class="max-w-7xl mx-auto grid md:grid-cols-3 gap-8 px-6">

    <div class="bg-card rounded-2xl p-8 text-center shadow-lg">
      <h3 class="text-white text-3xl font-semibold mb-2">
        <%= elections.length %>
      </h3>
      <p class="text-muted text-sm uppercase tracking-wide">
        Total Elections
      </p>
    </div>

    <div class="bg-card rounded-2xl p-8 text-center shadow-lg">
      <h3 class="text-white text-3xl font-semibold mb-2">
        <%= elections.filter(e => e.isPublished).length %>
      </h3>
      <p class="text-muted text-sm uppercase tracking-wide">
        Voting Open
      </p>
    </div>

    <div class="bg-card rounded-2xl p-8 text-center shadow-lg">
      <h3 class="text-white text-3xl font-semibold mb-2">
        <%= elections.filter(e => e.resultsPublished).length %>
      </h3>
      <p class="text-muted text-sm uppercase tracking-wide">
        Results Published
      </p>
    </div>

  </div>
</section>

<!-- ================= ELECTIONS ================= -->
<section id="elections" class="bg-navy py-24">
  <div class="max-w-7xl mx-auto px-6">

    <h2 class="text-white text-3xl font-semibold mb-12">
      Available Elections
    </h2>

    <% if (elections.length === 0) { %>
      <p class="text-muted">No elections available.</p>
    <% } %>

    <div class="grid md:grid-cols-3 gap-10">

      <% elections.forEach(election => { %>
        <div class="bg-card rounded-2xl p-6
                    hover:-translate-y-2 transition
                    shadow-lg shadow-black/30">

          <!-- TITLE + STATUS -->
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-white font-medium text-lg">
              <%= election.title %>
            </h3>

            <% if (election.resultsPublished) { %>
              <span class="text-xs px-3 py-1 rounded-full
                           bg-emerald-500/20 text-emerald-400">
                Results Published
              </span>
            <% } else if (election.isPublished) { %>
              <span class="text-xs px-3 py-1 rounded-full
                           bg-accent/20 text-accent">
                Voting Open
              </span>
            <% } else { %>
              <span class="text-xs px-3 py-1 rounded-full
                           bg-gray-500/20 text-gray-400">
                Not Available
              </span>
            <% } %>
          </div>

          <!-- DESCRIPTION -->
          <p class="text-muted text-sm mb-6 leading-relaxed">
            <%= election.description %>
          </p>

          <!-- ACTION BUTTON -->
          <% if (election.resultsPublished) { %>
            <!-- âœ… RESULTS -->
            <a href="/results/<%= election._id %>"
               class="inline-block bg-emerald-500/20 text-emerald-400
                      px-5 py-2.5 rounded-lg
                      hover:bg-emerald-500 hover:text-black transition">
              View Results â†’
            </a>

          <% } else if (election.isPublished) { %>
            <!-- ğŸ—³ VOTE -->
            <a href="/elections/<%= election._id %>"
               class="inline-block bg-accent text-white
                      px-5 py-2.5 rounded-lg
                      hover:brightness-125 transition">
              View Election â†’
            </a>

          <% } else { %>
            <!-- ğŸ”’ -->
            <span class="text-muted text-sm">
              Election not active
            </span>
          <% } %>

        </div>
      <% }) %>

    </div>
  </div>
</section>

<%- include('partials/footer') %>
<%- include('partials/script') %>
